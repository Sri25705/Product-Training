<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/a0dac2072e.js" crossorigin="anonymous"></script>
    <title>Quiz Management</title>
    <style>
        .page{
            display: grid;
            grid-template-rows:20% 80%;
        }
        .top{
            display: flex;
            align-items: center;
            background-color: white;
            padding:10px 20px;
            gap:10px;
            position: sticky;
           top:0;
            background-color: beige;
            border-radius: 6px;
            height: 80px;
        }
        
        .menu{
          position: relative;
          
        }

        .menu button{
          border:none;
          border-radius: 6px;
          cursor:pointer;
          font-size: 14px;
        }

        .menu-content{
          height: 100%;
          width:0;
          position: fixed;
          z-index: 1;
          top:0;
          left:0;
          background-color: whitesmoke;
          overflow-x: hidden;
          transition:0.5s;
          padding-top: 60px;
        }

      .menu-content a {
      text-decoration: none;
      padding:8px 8px 8px 32px;
      font-size: 25px;
      display: block;
      transition:0.3s;
    }

    .menu-content a:hover {
      color:rgb(180, 112, 9);
    }

       .menu-content .closebtn{
        position: absolute;
        top:0;
        right:25px;
        font-size: 36px;
        margin-left: 50px;
       }

         .content{
            display: grid;
            grid-template-rows: auto auto;
            padding: 20px;
            gap:20px;
        }

         #name{
          border-radius: 6px;
          padding:6px;
        }

        #submit{
          border-radius: 6px;
          padding: 10px;
          background-color: antiquewhite;
          border: none;
          color: brown;
        }

        .quiz-box{
          cursor:pointer;
          gap:20px;
          display: grid;
          grid-template-columns: auto auto auto auto;
          padding: 20px;
        }

    .quiz-box > div{
      background-color: bisque;
      padding:20px;
      font-size: 14px;
      border-radius: 6px;
      transition:transform 0.3s ease, box-shadow 0.3s ease;
    }

    .quiz-box > div:hover{
      transform: scale(1.1);
      box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    }

    .quiz-box > div button{
      border-radius: 6px;
      background-color: rgb(62, 62, 209);
      color:white;
      width:100px;
      padding:10px;
      border: none;
      cursor: pointer;
    }

    .quiz-box > div img{
      width:50px;
      height: 50px;
    }

     .recent-quizzes {
      margin-top: 20px;
    }

    .recent-quizzes h2 {
      font-size: 22px;
      margin-bottom: 10px;
    }

    .recent-list {
      display: grid;
      grid-template-columns: auto auto auto;
      gap: 15px;
    }

    .recent-item {
      background-color: #f8f8f8;
      border-radius: 6px;
      padding: 10px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    .recent-item p {
      margin: 5px 0;
    }

    .recent-item button {
      background-color: green;
      color: white;
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    @media(max-width:768px){
      .top{
        flex-direction: column;
        align-items: flex-start;
        gap:10px;
      }
      #submit{
        margin-top: 10px;
        margin-left: 100px;
      }
      .content{
        grid-template-columns: auto;
      }
      .quiz-box{
        grid-template-columns: auto auto;
      }
    }

    .recent-list{
      grid-template-columns: auto;
    }
    </style>

</head>

<body>
    <div class="page">
        <div class="top">
          <div class="menu">
          <div class="menu-content" id="menudropdown">
            <a href="javascript:void(0)" class="closebtn" onclick="closenav()">&times;
            </a>
            <a href="admin.html">Admin Dashboard</a>
            <a href="#">My Quiz</a>
            <a href="#"></a>
          </div>
          <span style="font-size: 30px;cursor:pointer" onclick="opennav()">&#9776;
          </span>
        </div>

            <div class="logo">
           <b style="color: crimson;font-family: 'Times New Roman', Times, serif;font-size: larger;"> Qmelon</b><i class="fa-solid fa-comments"></i></i></p>
        </div>
        </div>

        <div class="content">

          <div class="choose">
            <h2>Select a course and Enter your name</h2>
          <lable style="font-size: large;">Name</lable>   
          <input type="text" id="name">
          <input type="submit" id="submit" value="Submit">
        </div>
        
        <div class="quiz-box">
          
            <div class="quiz1">
              <img src="JS.png" alt="js">
              <b style="font-size: large;">Basic Java Script</b><br>
              <P>JS Fundmentals(Oops,Operators)</P>
            <button>Start Quiz</button></div>
            <div class="quiz2">
              <b style="font-size: large;">Basic HTML</b><br>
              <P>Fundmentals(Oops,Operators)</P>
            <button>Start Quiz</button></div>
            <div class="quiz3">
              <b style="font-size: large;">Advanced Java Script</b><br>
              <P>JS Fundmentals(Oops,Operators)</P>
            <button>Start Quiz</button></div>
            <div class="quiz4"> <b style="font-size: large;">Basic Python</b><br>
              <P>JS Fundmentals(Oops,Operators)</P>
            <button>Start Quiz</button></div>
            <div class="quiz5"> <b style="font-size: large;">Basic c</b><br>
              <P>JS Fundmentals(Oops,Operators)</P>
            <button>Start Quiz</button></div>
            <div class="quiz6"> <b style="font-size: large;">Basic CSS</b><br>
              <P>JS Fundmentals(Oops,Operators)</P>
            <button>Start Quiz</button></div>
            <div class="quiz7"> <b style="font-size: large;">Basic Java</b><br>
              <P>JS Fundmentals(Oops,Operators)</P>
            <button>Start Quiz</button></div>
            <div class="quiz8"> <b style="font-size: large;">Basic C++</b><br>
              <P>JS Fundmentals(Oops,Operators)</P>
            <button>Start Quiz</button></div>
            
          </div>  

          <div class="recent-quizzes">
            <h2>Recent Quiz</h2>
            <div class="recent-list" id="recentList">
            </div>
          </div>

        </div>
        </div>

      <script>
        function opennav() {
        document.getElementById("menudropdown").style.width = "250px";
      }

       function closenav() {
       document.getElementById("menudropdown").style.width = "0";
      }

  const submitBtn = document.getElementById("submit");
  submitBtn.addEventListener("click", () => {
    const nameInput = document.getElementById("name");
    const name = nameInput.value.trim();

    if (name === "") {
      alert("Please enter your name before submitting!");
      return;
    }

    let users = JSON.parse(localStorage.getItem("users")) || [];

    if (users.includes(name)) {
      alert("This name is already taken. Please choose a unique name.");
      return;
    }

    users.push(name);
    localStorage.setItem("users", JSON.stringify(users));
    localStorage.setItem("currentUser", name);

    alert("Name submitted successfully: " + name);
    nameInput.value = "";
    renderRecentQuizzes(); 
  });

  document.addEventListener("DOMContentLoaded", () => {
    const startButtons = document.querySelectorAll(".quiz-box button");

    startButtons.forEach((btn) => {
      btn.addEventListener("click", (e) => {
        const currentUser = localStorage.getItem("currentUser");
        if (!currentUser) {
          alert("Please fill in your name and submit before starting a quiz!");
          return;
        }

        const course = e.target.parentElement.querySelector("b").textContent.trim();

        let userQuizzes = JSON.parse(localStorage.getItem("userQuizzes")) || {};
        if (!userQuizzes[currentUser]) {
          userQuizzes[currentUser] = [];
        }
        if (!userQuizzes[currentUser].includes(course)) {
          userQuizzes[currentUser].push(course);
        }
        localStorage.setItem("userQuizzes", JSON.stringify(userQuizzes));

        localStorage.setItem("selectedCourse", course);

        window.location.href = "quiz_page.html";
      });
    });

    renderRecentQuizzes(); 
  });

  
  function renderRecentQuizzes() {
    const recentList = document.getElementById("recentList");
    if (!recentList) return;

    recentList.innerHTML = "";

    const currentUser = localStorage.getItem("currentUser");
    if (!currentUser) {
      recentList.innerHTML = "<p>No recent quizzes found. Please enter your name to start.</p>";
      return;
    }

    let userQuizzes = JSON.parse(localStorage.getItem("userQuizzes")) || {};
    const recent = userQuizzes[currentUser] || [];

    if (recent.length === 0) {
      recentList.innerHTML = "<p>No recent quizzes found.</p>";
      return;
    }

    recent.forEach((course) => {
      const div = document.createElement("div");
      div.classList.add("recent-item");
      div.style.display = "flex";
      div.style.justifyContent = "space-between";
      div.style.alignItems = "center";
      div.style.margin = "5px 0";
      div.style.background = "#f5f5f5";
      div.style.padding = "8px";
      div.style.borderRadius = "6px";

      div.innerHTML = `
        <span>${course}</span>
        <button onclick="quickStart('${course}')">Quick Start</button>
      `;

      recentList.appendChild(div);
    });
  }

  function quickStart(course) {
    const currentUser = localStorage.getItem("currentUser");
    if (!currentUser) {
      alert("Please enter your name first!");
      return;
    }

    localStorage.setItem("selectedCourse", course);
    window.location.href = "quiz_page.html";
  }

      </script>
</body>
</html>